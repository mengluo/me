<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<title>Supermeng Games</title>
		<meta name="description" content="Game Portfolio" />
		<meta name="keywords" content="games, Unity3d, meng, wpi, portfolio" />
		<meta name="author" content="Meng" />
		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="css/Me_styles.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<script href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r73/three.min.js"></script>

	</head>
	<body>
	    <div id="container"></div>
		<header>
				<div class="avatar"><img src="pics/Avatar.png"></div>	
		</header>

		<div class="container">	


		      <a href="GamePortfolio.html" id="unity" class="unity-s button homepagebtn">Games</a>
			  <a href="https://www.linkedin.com/in/meng-luo-35b62363" id="me" class="me-s button homepagebtn">Me</a>
			  <a href="Memories.html" id="memories" class="memories-s button homepagebtn">Memories</a>


			<div class="row footer homepagefooter">
			 Copyright &copy; 2015, Meng Luo (mluo.bupt [at] gmail.com). All rights reserved.
			</div>
		</div><!-- /container -->
	

        <!-- ---------------- Custom Shader Code ------------------------ -->
        <script id="vertexShader" type="x-shader/x-vertex">
        uniform vec3 viewVector;
        uniform float c;
        uniform float p;
        varying float intensity;
        void main() 
        {
            vec3 vNormal = normalize( normalMatrix * normal );
        	vec3 vNormel = normalize( normalMatrix * viewVector );
        	intensity = pow( c - dot(vNormal, vNormel), p );
        	
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        </script>
        
        <!-- fragment shader a.k.a. pixel shader -->
        <script id="fragmentShader" type="x-shader/x-vertex"> 
        uniform vec3 glowColor;
        varying float intensity;
        void main() 
        {
        	vec3 glow = glowColor * intensity;
            gl_FragColor = vec4( glow, 1.0 );
        }
        </script>


		<script>


			var container;

			var camera, scene, renderer;
			var cameraCube, sceneCube;

			var mesh, lightMesh, geometry;
			var spheres = [];

			var directionalLight, pointLight;

			var mouseX = 0;
			var mouseY = 0;

			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

			document.addEventListener( 'mousemove', onDocumentMouseMove, false );

			init();
			animate();

			function init() {

				container = document.getElementById( 'container' );


				camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 100000 );
				camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
				camera.position.z = 3200;

				scene = new THREE.Scene();
				var light = new THREE.DirectionalLight( "rgb(255, 255, 255)" );
                light.position.set( 0, 0, 0 ).normalize();
                scene.add(light);

				var geometry = new THREE.SphereBufferGeometry( 10, 16, 16 );

				//var material = new THREE.MeshBasicMaterial( { color: 0xffffff } );
                /*var material = new THREE.MeshPhongMaterial( { 
                                   color: "rgb(0, 0, 180)", 
                                   specular: "rgb(255, 255, 255)",
								   emissive: 1000
                               } );*/
                 var material = new THREE.ShaderMaterial( 
	            {
	                uniforms: 
	            	{ 
	            		"c":   { type: "f", value: 1 },
	            		"p":   { type: "f", value: 1 },
	            		glowColor: { type: "c", value: new THREE.Color("rgb(0, 0, 200)") },
	            		viewVector: { type: "v3", value: camera.position }
	            	},
	            	vertexShader:   document.getElementById( 'vertexShader'   ).textContent,
	            	fragmentShader: document.getElementById( 'fragmentShader' ).textContent,
	            	side: THREE.FrontSide,
	            	blending: THREE.AdditiveBlending,
	            	transparent: true
	            }   );
	            	
	            
				
				for ( var i = 0; i < 100; i ++ ) {

					var mesh = new THREE.Mesh( geometry, material );
                    this.Glow = new THREE.Mesh( geometry.clone(), material.clone() );
							   
					mesh.position.x = Math.random() * 10000 - 5000;
					mesh.position.y = Math.random() * 10000 - 5000;
					mesh.position.z = Math.random() * 10000 - 5000;

					mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 3 + 1;
                    Glow.position = mesh.position;
	                Glow.scale.multiplyScalar(1.2);
	                
					mesh.add( Glow );
					scene.add( mesh );

					spheres.push( mesh );

				}


				renderer = new THREE.WebGLRenderer({antialias: true});
				renderer.setPixelRatio( window.innerWidth / window.innerHeight );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.autoClear = false;
				container.appendChild( renderer.domElement );

				//

				window.addEventListener( 'resize', onWindowResize, false );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2,
				windowHalfY = window.innerHeight / 2,

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function onDocumentMouseMove( event ) {

				mouseX = ( event.clientX - windowHalfX ) * 10;
				mouseY = ( event.clientY - windowHalfY ) * 10;

			}

			//

			function animate() {

				requestAnimationFrame( animate );

				render();

			}

			function render() {

				var timer = 0.0001 * Date.now();

				for ( var i = 0, il = spheres.length; i < il; i ++ ) {

					var sphere = spheres[ i ];

					sphere.position.x = 10000 * Math.cos( timer + i );
					sphere.position.z = 10000 * Math.sin( timer + i*1.1 );
					//sphere.position.z = 5000 * Math.sin( timer + i*0.5 );

				}

				camera.position.x += ( mouseX - camera.position.x ) * .01;
				camera.position.y += ( - mouseY - camera.position.y ) * .01;

				camera.lookAt( scene.position );				
				renderer.render( scene, camera );

			}

		</script>
        <script>
			$('header >div.avatar >img').mouseover(function (){
		         $(this).attr("src","pics/Avatar_Hover.png");
		
	        });
	
	        $('header >div.avatar >img').mouseleave(function (){
		         $(this).attr("src","pics/Avatar.png");
		
	        });
			   
            if (window.matchMedia('(max-width: 768px)').matches){
        	        console.log("smaller");
        			normalButton()
                               
            }
      	    if (window.matchMedia('(min-width: 768px)').matches){
      	       		console.log("larger");
      	            electricButton()
   	       		
            }
		
	        $(window).resize(function(){
	    	    if (window.matchMedia('(max-width: 768px)').matches)
                {
	    		   console.log("smaller");
				   normalButton()
               
                }
	    	   if (window.matchMedia('(min-width: 768px)').matches)
               {
	    		   console.log("larger");
				   electricButton()
	    		
	    	   }
	        });	

          function electricButton(){
		     var unityBtnClass = "unity-l biliboard electronic",
			     meBtnClass = "me-l biliboard electronic",
			     memoBtnClass = "memories-l biliboard electronic";
		     $("div.container >#unity").attr('class', unityBtnClass);
			 $("div.container >#me").attr('class', meBtnClass);
			 $("div.container >#memories").attr('class', memoBtnClass);
		  }

          function normalButton(){
		     var unityBtnClass = "unity-s button homepagebtn",
			     meBtnClass = "me-s button homepagebtn",
			     memoBtnClass = "memories-s button homepagebtn";
		     $("div.container >#unity").attr('class', unityBtnClass);
			 $("div.container >#me").attr('class', meBtnClass);
			 $("div.container >#memories").attr('class', memoBtnClass);
		  }			  
        </script>		
	</body>
</html>
